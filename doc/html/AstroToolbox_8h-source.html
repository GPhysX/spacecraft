<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AstroToolbox.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>AstroToolbox.h</h1><a href="AstroToolbox_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef ASTROTOOLBOX_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define ASTROTOOLBOX_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "cmatrix"</span>
00005 <span class="preprocessor">#include "math.h"</span>
00006 
00007 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00008 <span class="keyword">using</span> <span class="keyword">namespace </span>techsoft;
<a name="l00009"></a><a class="code" href="AstroToolbox_8h.html#a0">00009</a> <span class="keyword">typedef</span> matrix&lt;double&gt; <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a>;
00010 
00011 
00012 
00013 
<a name="l00014"></a><a class="code" href="AstroToolbox_8h.html#a1">00014</a> <span class="keyword">inline</span> <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> <a class="code" href="Matrix_8h.html#a6">eye</a>(<span class="keywordtype">int</span> rowcolumns)
00015 {
00016         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> eyeOutput(rowcolumns,rowcolumns,0.0);
00017         eyeOutput.diag() = 1.0;
00018         <span class="keywordflow">return</span> eyeOutput;
00019 }
00020 
<a name="l00021"></a><a class="code" href="AstroToolbox_8h.html#a2">00021</a> <span class="keyword">inline</span> <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> <a class="code" href="Matrix_8h.html#a11">skew</a>(<a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> input)
00022 {
00023         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> R(3,3,0.0);
00024         R(0,1) = -input(2,0);
00025         R(0,2) = input(1,0);
00026         R(1,0) = input(2,0);
00027         R(1,2) = -input(0,0);
00028         R(2,0) = -input(1,0);
00029         R(2,1) = input(0,0);
00030         
00031         <span class="keywordflow">return</span> R;
00032 }
00033 
00034 
<a name="l00035"></a><a class="code" href="AstroToolbox_8h.html#a3">00035</a> <span class="keyword">inline</span> <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> <a class="code" href="AstroToolbox_8h.html#a3">Roi</a>(<span class="keywordtype">double</span> Om,<span class="keywordtype">double</span> inc,<span class="keywordtype">double</span> u)
00036 {       <span class="comment">//  function R = Roi(Om,inc,u)</span>
00037         <span class="comment">//  returns the rotation matrix from inertial to</span>
00038         <span class="comment">//  orbital frame, defined by</span>
00039         <span class="comment">//    Om  = right ascension of the ascending node</span>
00040         <span class="comment">//    inc = inclination         </span>
00041         <span class="comment">//    u   = argument of latitude</span>
00042 
00043         <span class="keywordtype">double</span> sO = sin(Om);  <span class="keywordtype">double</span> cO = cos(Om);
00044         <span class="keywordtype">double</span> si = sin(inc); <span class="keywordtype">double</span> ci = cos(inc);
00045         <span class="keywordtype">double</span> su = sin(u);   <span class="keywordtype">double</span> cu = cos(u);
00046         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> R(3,3,1.0);
00047                 R(0,0) = -su*cO-cu*ci*sO;
00048                 R(0,1) = -su*sO+cu*ci*cO;
00049                 R(0,2) = cu*si;
00050                 R(1,0) = -si*sO;
00051                 R(1,1) = si*cO;
00052                 R(1,2) = -ci;
00053                 R(2,0) = -cu*cO+su*ci*sO;
00054                 R(2,1) = -cu*sO-su*ci*cO;
00055                 R(2,2) = -su*si;
00056         <span class="keywordflow">return</span> R;
00057 }
00058 
<a name="l00059"></a><a class="code" href="AstroToolbox_8h.html#a4">00059</a> <span class="keyword">inline</span> <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> <a class="code" href="AstroToolbox_8h.html#a4">q2R</a>(<a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> q14)
00060 {
00061         q14 /= q14.norm2((<a class="code" href="Matrix_8h.html#a5">Vector</a>));
00062         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> q4(1,1); q4 = q14(3,0);
00063         <span class="keywordtype">double</span> q4_v = q14(3,0);
00064         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> q(3,1);  q = q14[mslice(0,0,3,1)];
00065 
00066         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> temp_m(3,3); temp_m = (pow(q4,2) - (~q) * q);
00067         <span class="keywordtype">double</span> temp_v = temp_m(0,0);
00068         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> R(3,3); R = temp_v * <a class="code" href="Matrix_8h.html#a6">eye</a>(3) + 2.0 * q * (~q) - 2.0 * q4_v * <a class="code" href="Matrix_8h.html#a11">skew</a>(q);
00069         <span class="keywordflow">return</span> R;
00070 }
00071 
<a name="l00072"></a><a class="code" href="AstroToolbox_8h.html#a5">00072</a> <span class="keyword">inline</span> <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> <a class="code" href="AstroToolbox_8h.html#a5">R2q</a>(<a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> R)
00073 {       <span class="comment">//  q = R2q(R)</span>
00074         <span class="comment">//      R is a rotation matrix</span>
00075         <span class="comment">//      q is a quaternion (4 x 1) with q(1:3) the vector part</span>
00076         
00077         <span class="keywordtype">double</span> q4 = 0.5 * ::sqrt(1 + R.trace());
00078         <a class="code" href="AstroToolbox_8h.html#a0">Matrix</a> q(4,1,0.0);
00079         q(0,0) = R(1,2)-R(2,1);
00080         q(1,0) = R(2,0)-R(0,2);
00081         q(2,0) = R(0,1)-R(1,0);
00082         q /= (4 * q4);
00083         q(3,0) = q4;
00084         
00085         q /= q.norm2((<a class="code" href="Matrix_8h.html#a5">Vector</a>));   <span class="comment">// make sure it's unit length</span>
00086         <span class="keywordflow">return</span> q;
00087 }
00088 
00089 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Thu Feb 27 13:46:15 2003 for Spacecraft Simulation Framework by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
