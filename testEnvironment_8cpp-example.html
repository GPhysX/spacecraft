<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Open-Sessame Framework: testEnvironment.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Sessame Framework
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('testEnvironment_8cpp-example.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">testEnvironment.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Encapsulation of an environmental disturbance function.</p>
<pre class="fragment">    An EnvFunction is used to store a function pointer and the list of parameters
    that are used in evaluating an environmental disturbance function. The 
    function can either be a force or torque disturbance. Examples include:</pre> <pre class="fragment">    \par (force) Gravity, aerodynamic drag, solar radiation pressure
    \par (torque) Gravity gradient, magnetic, aerodynamic, fuel slosh &lt;p&gt;

    \oar The parameters are the constants (such as Ballistic coefficient, 
    magnetic dipole, cross-sectional area), in the appropriate function
    order, and can be set or removed individually. Furthermore, because
    they are actually pointers to data, once the pointer is set, the data
    can still change (for example the mass of the spacecraft) without 
    having to alter the EnvFunction parameter list.&lt;/p&gt;

    \par Usage:
    To use the EnvFunction class, the user first creates a disturbance
    function that matches the prototype of pt2EnvFunc, which takes the 
    current time, orbit state, attitude state, and an STL vector
    of pointers to the parameters. They then must create an instance of
    an EnvFunction with a pointer to the function:
</pre> <div class="fragment"><div class="line">EnvFunction DragForce(&amp;myDisturbanceFunction);</div>
</div><!-- fragment --><p> and then fill out the parameter list: </p><div class="fragment"><div class="line">DragForce.AddParameter(reinterpret_cast&lt;void*&gt;(*CrossArea), 1);</div>
</div><!-- fragment --><p> Notice it is important to only give a pointer to a value that will stay "in scope" as long as needed for the simulation. Also, the reinterpret_cast&lt;void*&gt;() is needed to make the value 'look like' a void pointer. Don't worry too much about this, but read Stroustrop if you'd like to know more.</p>
<dl class="section user"><dt>Example disturbance function:</dt><dd><div class="fragment"><div class="line"><span class="comment">// Force function that will be called each timestep</span></div>
<div class="line"><a name="a0"></a><a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> <a name="a1"></a><a class="code" href="testEnvironment_8cpp.html#a88a08ab964a5913e440d474866ae7f7d">DragForceFunction</a>(<span class="keyword">const</span> ssfTime* _currentTime, <span class="keyword">const</span> OrbitState* _currentOrbitState, <span class="keyword">const</span> AttitudeState* _currentAttitudeState, <a name="a2"></a><a class="code" href="namespaceO__SESSAME.html#a9ebda077818936a6631686a6f191c39b">EnvFuncParamaterType</a> _parameterList)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Forces(3);</div>
<div class="line">    <span class="keywordtype">double</span> BC = *(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">double</span>*<span class="keyword">&gt;</span>(_parameterList[1]));</div>
<div class="line">    <span class="keywordtype">double</span> Density = *(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">double</span>*<span class="keyword">&gt;</span>(_parameterList[2])); <span class="comment">// kg/m^3</span></div>
<div class="line">    <a class="code" href="namespaceO__SESSAME.html#aa5cbaab43220a5b5e4dcfecb6d6644f6">Vector</a> Vrel(3); Vrel = _currentOrbitState-&gt;GetState()(<a name="a3"></a><a class="code" href="access_8h.html#a897762bc9d770a93b04900046ac844b6">_</a>(<a name="a4"></a><a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+3,<a class="code" href="namespaceO__SESSAME.html#a8f5c6aff4bb7124786e21a52f42b96e1">VectorIndexBase</a>+5));</div>
<div class="line">    <span class="keywordtype">double</span> Vrel_mag = <a name="a5"></a><a class="code" href="namespaceO__SESSAME.html#a39124db042647a87f5c41ce772a502e6">norm2</a>(Vrel);</div>
<div class="line">    Forces = -1/2 * rho / BC * pow(Vrel_mag,2) * Vrel / Vrel_mag; </div>
<div class="line">    <span class="keywordflow">return</span> Forces;</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<p>Example using an Environment object for integration.</p>
<div class="fragment"></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 29 2014 23:02:08 for Open-Sessame Framework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
